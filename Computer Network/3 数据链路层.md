## 数据链路层
#### 数据链路层的功能
* 为网络层提供服务：无确认的无连接服务，有确认的无连接服务，有确认的面向连接服务
* 链路管理：数据链路层连接的建立、维持和释放过程
* 帧定界、帧同步与透明传输
* 流量控制：限制发送方的数据流量，使其发送速率不超过接收方的接收能力
* 差错控制：使发送方确定接收方是否正确收到了由它发送的数据的方法

#### 组帧
发送方依据一定的规则把网络层递交的分组封装成帧。
* 字符计数法：在帧头部使用一个计数字段来标明帧内字符数
* 字符填充的首位定界符发：使用一些特定的字符来定界一帧的开始（DLE STX）与结束（DLE ETX）。为了使信息位中出现的特殊字符不被误判，可以在特殊字符前面填充一个转义字符（DLE）来区分，数据段中出现 DLE 可在其前面再插入一个 DLE
* 比特填充的首位标志法：使用一个特定的比特模式，即01111110来标志一帧的开始和结束。发送方在信息位中出现连续5个1时自动在后面插入一个0，接收方进行逆操作
* 违规编码法：如在曼彻斯特编码方法中采用”高-高“电平对和”低-低“电平对

#### 差错控制（检错与纠错编码）
* 自动重传请求（Automatic Retransmission Request， ARQ）：只能检错，出错时通知发送端重发，对应检错编码（Error-Detecting Code）。
* 前向纠错（Forward Error Correction，FEC）：可以纠错，对应纠错编码（Error-Correcting Code）。

### 流量控制与可靠传输
* 可靠传输机制：通常使用确认和超时重传两种机制完成。
* 滑动窗口机制：在任意时刻，发送方都维持一组连续的允许发送的帧的序号，称为发送窗口；接收方维持接收窗口。接收方只有收到数据帧的序号落在接收窗口内才允许将该数据帧收下。
* 停止-等待协议：发送方每发送一帧，都要等待对方的应答信号，之后才能发送下一帧；接收方每接收一帧，都要反馈一个应答信号，表示可接收下一帧。
* 后退 N 帧协议（GBN）：发送方可连续发送帧，接收方检测出失序的信息帧后，要求发送方重发最后一个正确接收的信息帧之后的所有未被确认的帧；或者发送方发送了 N 个帧之后，若发现该 N 个帧的前一个帧在计时器超时后仍未返回其确认信息，则重传该出错帧及随后的 N 个帧。
* 选择重传协议（SR）：加大接收窗口，先收下发送序号不连续但仍处在接收窗口中的数据帧，等到所缺序号的数据帧收到后再一并送交主机。

### 介质访问控制
用来决定广播信道中信道分配的协议称为介质访问控制（Medium Access Control，MAC）子层，属于数据链路层的一个子层。

#### 信道划分介质访问控制
* 频分多路复用（FDM）：将多路基带信号调制到不同频率载波上再进行叠加形成一个复合信号的多路复用技术。
* 时分多路复用（TDM）：将一条物理信道按时间分成若干个时间片，轮流地分配给多个信号使用。
* 波分多路复用（WDM）：光的频分多路复用，在一根光纤中传输多种不同波长（频率）的光信号，由于波长（频率）不同，所以各路光信号互不干扰，最后再用波长分解复用器将各路波长分解出来。
* 码分多路复用（CDM）：靠不同的编码来区分各路原始信号的一种复用方式。

#### 随机访问介质访问控制
* ALOHA 协议
	* 纯 ALOHA 协议：当网络中的任何一个站点需要发送数据时，可以不进行任何检测就发送数据。如果一段时间内没有收到确认，该站点就认为传输过程中发生了冲突，等待一段时间后再发送数据。
	* 时隙 ALOHA 协议：把所有各站在时间上同步起来，将时间划分为一段段等长的时隙（Slot），规定只能在每个时隙开始时才能发送一个帧。
* CSMA 协议：每个站点发送前先侦听共用信道，发现空闲后再发送。
	* 1-坚持 CSMA：侦听信道：空闲则立即发送；忙则继续侦听直至信道空闲；冲突则随即等待一段时间再侦听。
	* 非坚持 CSMA：侦听信道：空闲则立即发送；忙则等待一个随机的时间后再侦听。
	* p-坚持 CSMA：侦听信道：忙则等待下一个时隙再侦听；空闲则以概率 p 发送数据，以概率 1-p 推迟到下一个时隙。
* CSMA/CA 协议：信道忙变为空闲，且要发送数据时，不仅需要等待一个时间间隔，还要进入争用窗口，并计算随机退避时间以便再次重新试图接入到信道。
* 令牌传递协议：一个令牌在各结点间以某个固定次序交换，只有收到令牌，站点才可发送数据。

### 局域网
#### 概念及体系结构
三种特殊的局域网拓扑实现：
* 以太网（目前使用范围最广的局域网）：逻辑拓扑是总线型结构，物理拓扑是星形或拓展星形结构。
* 令牌环（Token Ring， IEEE802.5）：逻辑拓扑是环形结构，物理拓扑是星形结构。
* FDDI（光纤分布数字接口， IEEE802.8）：逻辑拓扑是环形结构，物理拓扑是双环结构。

#### 以太网与 IEEE 802.3
IEEE 802.3 标准是一种基带总线型的局域网标准，描述物理层和数据链路层的 MAC 子层的实现方法。  
以太网采用两项措施简化通信：无连接的工作方式；不对发送的数据帧编号，也不要求接收方发送确认。

#### IEEE 802.11
制定了 MAC 层协议，运行在多个物理层标准上。除了最基本的协调访问问题，标准还进行错误控制。采用 CSMA/CA 协议进行介质访问控制。

#### 令牌环网
每一站通过电缆与环接口干线耦合器 TCU 相连。数据总是在一个特定的方向上从一个 TCU 到下一个 TCU 逐比特地依次传送，每个 TCU 重新产生并重新传输每一比特。

### 广域网
#### 概念
广域网由一些结点交换机以及连接这些交换机的链路组成。广域网不等于互联网，互联网可以连接不同类型的网络，通常使用路由器来连接。

#### PPP 协议
是**面向字节**的。有三个组成部分：
* 链路控制协议 LCP：一种扩展链路控制协议，用于建立、配置、测试和管理数据链路。
* 网络控制协议 NCP：允许同时采用多种网络层协议，每个不同的网络层协议要用一个相应的 NCP 来配置。
* 一个将 IP 数据报封装到串行链路的方法。

#### HDLC 协议
是**面向比特**的，采用“0比特插入法“实现透明传输。

### 设备
#### 网桥的概念和原理
两个或多个以太网通过网桥连接起来后，就成为一个覆盖范围更大的以太网。网桥工作在链路层的 MAC 子层，可以使以太网各网段称为隔离开的碰撞域。  
网桥有路径选择的功能，根据路径选择算法的不同，可将网桥分为透明网桥和源路由网桥。其中最佳路由不是指经过路由器最少，而是发送帧往返时间最短。

* 透明网桥：选择的不是最佳路由
* 源路由网桥：选择的是最佳路由

#### 交换机及其工作原理
交换机就是一个多端口的网桥。它检测从以太端口来的数据帧的源和目的地的 MAC 地址，然后与系统内部的动态查找表进行比较，若数据帧的 MAC 地址不在查找表中，则将该地址加入查找表，并将数据帧发送给相应的目的端口。
