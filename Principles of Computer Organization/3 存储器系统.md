## 存储器系统
**掌握存储系统的分类、分级结构与主存储器的技术指标，了解 SRAM、DRAM、EPROM、闪速存储器、相联存储器的工作原理，掌握 Cache 存储器、虚拟存储器的功能和基本工作原理。**

### 存储器概述
#### 按存储介质分类
* 半导体存储器：易失。按材料不同还可分为双极型（TTL）半导体存储器和 MOS 半导体存储器。
* 磁表面存储器：非易失。在金属或塑料基体的表面涂一层磁性材料作为记录介质，用磁头在磁层进行读/写操作。
* 磁芯存储器：非易失。硬磁材料做成环状元件，磁芯中穿有驱动线和读出线，目前已几乎不被采用。
* 光盘存储器：非易失。用激光在磁光材料上进行读/写操作。

#### 按存取方式分类
* 随机存储器（Random Access Memory, RAM）：一种可读/写存储器，存储器的任何一个存储单元的内容都可以随机存取，而且存取时间与存储单元的物理位置无关。主存都采用这种随机存储器。可分为静态 RAM和动态 RAM。
* 只读存储器（Random Access Memory, ROM）：只能对存储的内容读出，而不能写入。
* 串行访问存储器：对存储单元进行读/写操作时，需按其物理位置的先后顺序寻找地址。

#### 按在计算机中的作用分类
* 主存储器（主存）：可以和 CPU 直接交换信息。有 RAM 和 ROM。
* 辅助存储器（辅存）：存放当前暂时不用的程序和数据。有磁盘、磁带、光盘。
* 缓冲存储器（缓存）：用在两个速度不同的部件之中，起到缓冲作用。

### 存储器的层次化结构
寄存器、缓存、主存、磁盘、光盘、磁带，从左向右速度依次变慢，容量依次变大，每位价格依次降低。
* 缓存—主存层次：解决 CPU 和主存速度不匹配的问题。主存可直接与 CPU、缓存、辅存交换信息。
* 主存—辅存层次：解决存储系统的容量问题。发展过程中逐渐形成了虚拟存储系统。

### 半导体随机存取存储器
存储芯片通过地址总线、数据总线和控制总线与外部连接。地址线是单向输入的，数据线是双向的，控制线主要有读/写控制线与片选线两种。  
译码驱动方式有线选法和重合法两种。

#### SRAM 存储器
静态 RAM（Static RAM, SRAM）用触发器工作原理存储信息。

#### DRAM 存储器
动态 RAM（Dynamic RAM, DRAM）靠电容存储电荷的原理来寄存信息。必须在2 ms 内对所有存储单元恢复一次原状态，这个过程称为再生或刷新。比 SRAM 集成度更高、功耗更低。  
刷新过程实际上是先将原存信息读出，再由刷新放大器形成原信息并重新写入的再生过程。上述2 ms 称为再生周期或刷新周期。
* 集中刷新：对全部存储单元集中一段时间进行逐行刷新，此刻必须停止读/写操作。刷新的时间称为“死时间”或“死区”，所占比率称为“死时间率”。
* 分散刷新：对每行存储单元的刷新分散到每个存取周期内完成。会使存取周期变长，整个系统速度降低。
* 异步刷新：在2 ms 内对所有行各刷新一边，每次只停一行的时间。还可以将这段时间安排在 CPU 的译码阶段。

#### 只读存储器
1. 掩模 ROM（Masked ROM, MROM）：行列选择线交叉处有 MOS 管为1，没有为0。
2. 可编程 ROM（Programmable ROM, PROM）：行列选择线交叉处有熔丝，编程时可选择是否烧掉。读取时熔丝未断为1，断为0。
3. 可擦除可编程 ROM（Erasable Programmable ROM, EPROM）：采用 N 型沟道浮动栅 MOS 电路，可用紫外线进行全部擦洗。
4. 用电可擦除可编程 ROM（Electrically Erasable Programmable ROM, EEPROM）：用电气方法可将存储内容擦除重写，甚至可以局部擦写。

#### Flash 存储器
可擦写非易失性存储器。既有 EPROM 的价格便宜、集成度高的优点，又有 EEPROM 电可擦除重写的特性。比一般标准的 EEPROM 快得多，具备 RAM 功能。

### 主存储器与 CPU 的连接
#### 存储器容量的扩展
1. 位扩展：增加存储字长。如利用2片 1K * 4 位的存储芯片组成 1K * 8 位的存储器。
2. 字扩展：增加存储字的数量。如利用2片 1K * 8 位的存储芯片组成 2K * 8 位的存储器。
3. 字、位扩展：既增加存储字的数量，又增加存储字长。如利用8片 1K * 4 位的存储芯片组成 4K * 8 位的存储器。

#### 存储器与 CPU 的连接
1. 地址线的连接：CPU 的地址线数往往比存储芯片多，通常将 CPU 地址线的低位与存储芯片的地址线相连，CPU 地址线的高位可作片选信号等。
2. 数据线的连接：CPU 的数据线数比存储芯片多时，必须对存储芯片扩位。
3. 读/写命令线的连接：读/写控制线可以分开也可以合并。
4. 片选线的连接：当 CPU 的地址线比存储芯片多时，需要将多出的高位与 CPU 的片选线进行逻辑运算处理后连接。

### 双口 RAM 和多模块存储器
* 双口 RAM 是指一个 RAM 有两套独立的数据线、地址线和控制线。
* 多模块存储器可分为高位交叉和低位交叉。
    * 高位交叉：顺序编址，有利于存储器的扩充。
    * 低位交叉：低位地址表示体号，各个体轮流编址，可在不改变存取周期的前提下增加存储器带宽。

### 高速缓冲存储器（Cache）
主存速度的提高跟不上 CPU 的发展，希望由高速缓存解决主存与 CPU 的速度不匹配的问题。  
利用了程序访问的**局部性原理**：
* 时间局部性：刚被访问过的单元很可能**不久**又被访问。
* 空间局部性：刚被访问过的单元的**邻近**单元很可能被访问。

#### Cache 的基本工作原理
#### Cache 和主存之间的映射方式
#### Cache 中主存块的替换算法
#### Cache 写策略

### 虚拟存储器
#### 虚拟存储器的基本概念
#### 页式虚拟存储器
#### 段式虚拟存储器
#### 段页式虚拟存储器
